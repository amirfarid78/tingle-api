<%- include('partials/header', { pageTitle: 'Reports' , page: 'reports' }) %>
    <table>
        <thead>
            <tr>
                <th>Reporter</th>
                <th>Reported</th>
                <th>Reason</th>
                <th>Type</th>
                <th>Status</th>
                <th>Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% reports.forEach(function(r) { %>
                <tr>
                    <td>
                        <%= r.userId ? r.userId.name : 'Unknown' %>
                    </td>
                    <td>
                        <%= r.reportedUserId ? r.reportedUserId.name : '-' %>
                    </td>
                    <td style="max-width:200px">
                        <%= r.reportReason %>
                    </td>
                    <td><span class="badge badge-blue">
                            <%= r.type %>
                        </span></td>
                    <td>
                        <span
                            class="badge <%= r.status === 0 ? 'badge-yellow' : r.status === 2 ? 'badge-green' : 'badge-blue' %>">
                            <%= r.status===0 ? 'Pending' : r.status===1 ? 'Reviewed' : 'Resolved' %>
                        </span>
                    </td>
                    <td>
                        <%= new Date(r.createdAt).toLocaleDateString() %>
                    </td>
                    <td>
                        <% if(r.status < 2) { %>
                            <form method="POST" action="/admin/reports/<%= r._id %>/resolve"
                                style="display:flex;gap:4px">
                                <input name="adminNote" placeholder="Note..."
                                    style="padding:4px 8px;background:#252540;border:1px solid #2a2a3e;border-radius:4px;color:#e0e0e8;font-size:12px">
                                <button class="btn btn-success">Resolve</button>
                            </form>
                            <% } else { %>
                                <span style="color:#8888a4">Done</span>
                                <% } %>
                    </td>
                </tr>
                <% }) %>
        </tbody>
    </table>
    <%- include('partials/footer') %>